{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap dc1222f3609e1a54be5a","webpack:///./src/index.ts","webpack:///./src/renderer.ts","webpack:///./src/glsl/2d-vertex-shader.glsl","webpack:///./src/glsl/2d-fragment-shader.glsl"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","Renderer","renderOnCanvas","document","getElementById","vertexShaderSource","fragmentShaderSource","this","mousePos","x","y","oldMousePos","delta","undefined","start","Date","getTime","lastInput","isInput","div","_this","canvas","createElement","style","width","height","appendChild","gl","getContext","window","onload","init","getMousePos","evt","rect","getBoundingClientRect","mouseEvt","clientX","left","right","clientY","bottom","top","getTouchPos","touchEvt","touches","viewportToPixels","isHeight","parts","match","q","Number","innerHeight","innerWidth","getSize","clientWidth","clientHeight","setTimedInterval","callback","delay","timeout","id","setInterval","setTimeout","clearInterval","addListeners","addEventListener","onresize","vertexShader","fragmentShader","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","viewport","drawingBufferWidth","drawingBufferHeight","createShader","VERTEX_SHADER","shaderSource","compileShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","useProgram","render","addGLProperties","positionLocation","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","mousePosition","getUniformLocation","uniform2f","resolutionPosition","rotationPosition","timePosition","uniform1f","strengthPosition","offsetPosition","pitchPosition","drawArrays","TRIANGLES","requestAnimationFrame"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAI,EAAAJ,EACAK,GAAA,EACAH,WAUA,OANAJ,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,GAAA,EAGAF,EAAAD,QAvBA,GAAAD,KA4BAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAU,EAAA,SAAAP,EAAAQ,EAAAC,GACAZ,EAAAa,EAAAV,EAAAQ,IACAG,OAAAC,eAAAZ,EAAAQ,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAZ,EAAAmB,EAAA,SAAAf,GACA,GAAAQ,GAAAR,KAAAgB,WACA,WAA2B,MAAAhB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAJ,GAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDtB,EAAAyB,EAAA,GAGAzB,IAAA0B,EAAA,KDMM,SAAUtB,EAAQD,EAASH,GAEjCI,EAAOD,QAAUH,EAAoB,IAK/B,SAAUI,EAAQD,EAASH,GAEjC,YAEAc,QAAOC,eAAeZ,EAAS,cAAgBwB,OAAO,KEzE3B,IAH3B3B,EAAA,GAG+B4B,WACtBC,eAA6BC,SAASC,eAAe,UFgFxD,SAAU3B,EAAQD,EAASH,GAEjC,YAEAc,QAAOC,eAAeZ,EAAS,cAAgBwB,OAAO,GGzFtD,IAAIK,GAAyBhC,EAAQ,GACjCiC,EAA2BjC,EAAQ,GAMvC4B,EAAA,mBAAAA,KAIYM,KAAAC,UAAaC,EAAG,EAAKC,EAAG,GACxBH,KAAAI,aAAgBF,EAAG,EAAKC,EAAG,GAC3BH,KAAAK,UAA6BC,GAC7BN,KAAAO,OAAe,GAAIC,OAAOC,UAC1BT,KAAAU,UAAmB,EACnBV,KAAAW,SAAmB,EAwK/B,MAtKIjB,GAAAL,UAAAM,eAAA,SAAgBiB,GAAhB,GAAAC,GAAAb,IACIA,MAAKc,OAASlB,SAASmB,cAAc,UACrCf,KAAKc,OAAOE,MAAMC,MAAQ,OAC1BjB,KAAKc,OAAOE,MAAME,OAAS,OAC3BN,EAAIO,YAAYnB,KAAKc,QACrBd,KAAKoB,GAAKpB,KAAKc,OAAOO,WAAW,sBACjCC,OAAOC,OAAS,WAAM,MAAAV,GAAKW,SAG/B9B,EAAAL,UAAAoC,YAAA,SAAYX,EAA0BY,GAClC,GAAIC,GAAoBb,EAAOc,wBAC3BC,EAAqCH,CACzC,QACIxB,GAAI2B,EAASC,QAAUH,EAAKI,OAASJ,EAAKK,MAAQL,EAAKI,MAAQjB,EAAOG,MACtEd,GAAI0B,EAASI,QAAUN,EAAKO,SAAWP,EAAKQ,IAAMR,EAAKO,QAAUpB,EAAOI,SAIhFxB,EAAAL,UAAA+C,YAAA,SAAYtB,EAA0BY,GAClC,GAAIC,GAAoBb,EAAOc,wBAC3BS,EAAqCX,CACzC,QACIxB,GAAImC,EAASC,QAAQ,GAAGR,QAAUH,EAAKI,OAASJ,EAAKK,MAAQL,EAAKI,MAAQjB,EAAOG,MACjFd,GAAIkC,EAASC,QAAQ,GAAGL,QAAUN,EAAKO,SAAWP,EAAKQ,IAAMR,EAAKO,QAAUpB,EAAOI,SAI3FxB,EAAAL,UAAAkD,iBAAA,SAAiB9C,EAAc+C,GAC3B,GAAIC,GAA0BhD,EAAMiD,MAAM,qBACtCC,EAAYC,OAAOH,EAAM,GAC7B,OAAGD,GACQlB,OAAOuB,aAAeF,EAAI,KAE1BrB,OAAOwB,YAAcH,EAAI,MAIxCjD,EAAAL,UAAA0D,QAAA,WACI/C,KAAKc,OAAOG,MAAQjB,KAAKc,OAAOkC,YAChChD,KAAKc,OAAOI,OAASlB,KAAKc,OAAOmC,cAGrCvD,EAAAL,UAAA6D,iBAAA,SAAiBC,EAAmBC,EAAcC,GAC9C,GAAIC,GAAYhC,OAAOiC,YAAYJ,EAAUC,EAC7C9B,QAAOkC,WAAW,WACdlC,OAAOmC,cAAcH,IACtBD,IAGP3D,EAAAL,UAAAqE,aAAA,cAAA7C,GAAAb,IACIA,MAAKc,OAAO6C,iBAAiB,aAAc,SAACjC,GACxCb,EAAKF,SAAU,EACfE,EAAKR,UAAQC,KACd,GACHN,KAAKc,OAAO6C,iBAAiB,aAAc,SAACjC,GACxCb,EAAKF,SAAU,EACfE,EAAKR,UAAQC,GACbO,EAAKZ,SAAWY,EAAKuB,YAAYvB,EAAKC,OAAQY,KAC/C,GAEH1B,KAAKc,OAAO6C,iBAAiB,YAAa,SAACjC,GACvCb,EAAKT,YAAcS,EAAKZ,SACxBY,EAAKZ,SAAWY,EAAKY,YAAYZ,EAAKC,OAAQY,KAC/C,GACH1B,KAAKc,OAAO6C,iBAAiB,YAAa,SAACjC,GACvCb,EAAKT,YAAcS,EAAKZ,SACxBY,EAAKZ,SAAWY,EAAKuB,YAAYvB,EAAKC,OAAQY,KAC/C,GAEH1B,KAAKc,OAAO6C,iBAAiB,WAAY,SAACjC,GACtCb,EAAKR,OAAUH,EAAGW,EAAKZ,SAASC,EAAEW,EAAKT,YAAYF,EAAGC,EAAGU,EAAKZ,SAASE,EAAEU,EAAKT,YAAYD,GAC1FU,EAAKqC,iBAAiB,WACdrC,EAAKR,QACLQ,EAAKZ,UACDC,EAAEW,EAAKZ,SAASC,EAAIW,EAAKR,MAAMH,EAAGW,EAAc,UAAE,IAClDV,EAAGU,EAAKZ,SAASE,EAAIU,EAAKR,MAAMF,EAAGU,EAAc,UAAE,OAG5D,GAAI,KAEPA,EAAKF,SAAU,IAChB,GAEHX,KAAKc,OAAO6C,iBAAiB,aAAc,SAACjC,GACxCb,EAAKF,SAAU,IAChB,GACHW,OAAOsC,SAAW,WAAM,MAAAJ,YAAW,WAAM,MAAA3C,GAAKkC,WAAW,KAG7DrD,EAAAL,UAAAmC,KAAA,WACI,GAAIqC,GACAC,CAEJ9D,MAAK0D,eACL1D,KAAK+C,SAEL,IAAIgB,GAAsB/D,KAAKoB,GAAG4C,cAClChE,MAAKoB,GAAG6C,WAAWjE,KAAKoB,GAAG8C,aAAcH,GACzC/D,KAAKoB,GAAG+C,WACJnE,KAAKoB,GAAG8C,aACR,GAAIE,gBAAe,GAAM,EACrB,GAAM,GAAM,EAAK,GAAM,EAAK,EAC5B,GAAM,EACN,EAAK,IAETpE,KAAKoB,GAAGiD,aAGZrE,KAAKoB,GAAGkD,SAAS,EAAG,EAAGtE,KAAKoB,GAAGmD,mBAAoBvE,KAAKoB,GAAGoD,qBAE3DX,EAAe7D,KAAKoB,GAAGqD,aAAazE,KAAKoB,GAAGsD,eAC5C1E,KAAKoB,GAAGuD,aAAad,EAAc/D,GACnCE,KAAKoB,GAAGwD,cAAcf,GAEtBC,EAAiB9D,KAAKoB,GAAGqD,aAAazE,KAAKoB,GAAGyD,iBAC9C7E,KAAKoB,GAAGuD,aAAab,EAAgB/D,GACrCC,KAAKoB,GAAGwD,cAAcd,GAEtB9D,KAAK8E,QAAU9E,KAAKoB,GAAG2D,gBACvB/E,KAAKoB,GAAG4D,aAAahF,KAAK8E,QAASjB,GACnC7D,KAAKoB,GAAG4D,aAAahF,KAAK8E,QAAShB,GACnC9D,KAAKoB,GAAG6D,YAAYjF,KAAK8E,SACzB9E,KAAKoB,GAAG8D,WAAWlF,KAAK8E,SAExB9E,KAAKmF,UAGTzF,EAAAL,UAAA+F,gBAAA,WACI,GAAIC,GAA0BrF,KAAKoB,GAAGkE,kBAAkBtF,KAAK8E,QAAS,WACtE9E,MAAKoB,GAAGmE,wBAAwBF,GAChCrF,KAAKoB,GAAGoE,oBAAoBH,EAAkB,EAAGrF,KAAKoB,GAAGqE,OAAO,EAAM,EAAG,EAEzE,IAAIC,GAAqC1F,KAAKoB,GAAGuE,mBAAmB3F,KAAK8E,QAAS,QAClF9E,MAAKoB,GAAGwE,UAAUF,EAAe1F,KAAKC,SAASC,EAAGF,KAAKC,SAASE,EAEhE,IAAI0F,GAA0C7F,KAAKoB,GAAGuE,mBAAmB3F,KAAK8E,QAAS,aACvF9E,MAAKoB,GAAGwE,UAAUC,EAAoB7F,KAAKc,OAAOG,MAAOjB,KAAKc,OAAOI,OAErE,IAAI4E,GAAwC9F,KAAKoB,GAAGuE,mBAAmB3F,KAAK8E,QAAS,WACrF9E,MAAKoB,GAAGwE,UAAUE,EAAkB,GAAK,GAEzC,IAAIC,GAAoC/F,KAAKoB,GAAGuE,mBAAmB3F,KAAK8E,QAAS,OACjF9E,MAAKoB,GAAG4E,UAAUD,IAAe,GAAIvF,OAAOC,UAAYT,KAAKO,OAAS,IAEtE,IAAI0F,GAAwCjG,KAAKoB,GAAGuE,mBAAmB3F,KAAK8E,QAAS,WACrF9E,MAAKoB,GAAG4E,UAAUC,EAAkBjG,KAAKU,UAAU,IAEnD,IAAIwF,GAAsClG,KAAKoB,GAAGuE,mBAAmB3F,KAAK8E,QAAS,SACnF9E,MAAKoB,GAAGwE,UAAUM,EAAgB,EAAG,EAErC,IAAIC,GAAqCnG,KAAKoB,GAAGuE,mBAAmB3F,KAAK8E,QAAS,QAClF9E,MAAKoB,GAAGwE,UAAUO,EAAe,GAAI,KAGzCzG,EAAAL,UAAA8F,OAAA,cAAAtE,GAAAb,IACIA,MAAKoF,kBAELpF,KAAKoB,GAAGgF,WAAWpG,KAAKoB,GAAGiF,UAAW,EAAG,GAEzCC,sBAAsB,WAAM,MAAAzF,GAAKsE,YAC5BnF,KAAKW,SAAWX,KAAKU,UAAY,EAClCV,KAAKU,WAAW,EACTV,KAAKW,SAAWX,KAAKU,UAAY,MACxCV,KAAKU,WAAW,IAG5BhB,IAESzB,GAAAyB,YH4DH,SAAUxB,EAAQD,GIvPxBC,EAAAD,QAAA,qGJ6PM,SAAUC,EAAQD,GK7PxBC,EAAAD,QAAA","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar renderer_1 = __webpack_require__(2);\nvar renderer = new renderer_1.Renderer();\nrenderer.renderOnCanvas(document.getElementById(\"grid\"));\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vertexShaderSource = __webpack_require__(3);\nvar fragmentShaderSource = __webpack_require__(4);\nvar Renderer = /** @class */ (function () {\n    function Renderer() {\n        this.mousePos = { x: 0.0, y: 0.0 };\n        this.oldMousePos = { x: 0.0, y: 0.0 };\n        this.delta = undefined;\n        this.start = new Date().getTime();\n        this.lastInput = 3;\n        this.isInput = false;\n    }\n    Renderer.prototype.renderOnCanvas = function (div) {\n        var _this = this;\n        this.canvas = document.createElement(\"canvas\");\n        this.canvas.style.width = \"100%\";\n        this.canvas.style.height = \"100%\";\n        div.appendChild(this.canvas);\n        this.gl = this.canvas.getContext(\"experimental-webgl\");\n        window.onload = function () { return _this.init(); };\n    };\n    Renderer.prototype.getMousePos = function (canvas, evt) {\n        var rect = canvas.getBoundingClientRect();\n        var mouseEvt = evt;\n        return {\n            x: (mouseEvt.clientX - rect.left) / (rect.right - rect.left) * canvas.width,\n            y: (mouseEvt.clientY - rect.bottom) / (rect.top - rect.bottom) * canvas.height\n        };\n    };\n    Renderer.prototype.getTouchPos = function (canvas, evt) {\n        var rect = canvas.getBoundingClientRect();\n        var touchEvt = evt;\n        return {\n            x: (touchEvt.touches[0].clientX - rect.left) / (rect.right - rect.left) * canvas.width,\n            y: (touchEvt.touches[0].clientY - rect.bottom) / (rect.top - rect.bottom) * canvas.height\n        };\n    };\n    Renderer.prototype.viewportToPixels = function (value, isHeight) {\n        var parts = value.match(/([0-9\\.]+)(vh|vw)/);\n        var q = Number(parts[1]);\n        if (isHeight) {\n            return window.innerHeight * (q / 100);\n        }\n        else {\n            return window.innerWidth * (q / 100);\n        }\n    };\n    Renderer.prototype.getSize = function () {\n        this.canvas.width = this.canvas.clientWidth;\n        this.canvas.height = this.canvas.clientHeight;\n    };\n    Renderer.prototype.setTimedInterval = function (callback, delay, timeout) {\n        var id = window.setInterval(callback, delay);\n        window.setTimeout(function () {\n            window.clearInterval(id);\n        }, timeout);\n    };\n    Renderer.prototype.addListeners = function () {\n        var _this = this;\n        this.canvas.addEventListener(\"mouseenter\", function (evt) {\n            _this.isInput = true;\n            _this.delta = undefined;\n        }, true);\n        this.canvas.addEventListener(\"touchstart\", function (evt) {\n            _this.isInput = true;\n            _this.delta = undefined;\n            _this.mousePos = _this.getTouchPos(_this.canvas, evt);\n        }, true);\n        this.canvas.addEventListener(\"mousemove\", function (evt) {\n            _this.oldMousePos = _this.mousePos;\n            _this.mousePos = _this.getMousePos(_this.canvas, evt);\n        }, false);\n        this.canvas.addEventListener(\"touchmove\", function (evt) {\n            _this.oldMousePos = _this.mousePos;\n            _this.mousePos = _this.getTouchPos(_this.canvas, evt);\n        }, false);\n        this.canvas.addEventListener(\"touchend\", function (evt) {\n            _this.delta = { x: _this.mousePos.x - _this.oldMousePos.x, y: _this.mousePos.y - _this.oldMousePos.y };\n            _this.setTimedInterval(function () {\n                if (_this.delta) {\n                    _this.mousePos = {\n                        x: _this.mousePos.x + _this.delta.x * (_this.lastInput) / 250,\n                        y: _this.mousePos.y + _this.delta.y * (_this.lastInput) / 250\n                    };\n                }\n            }, 18, 1000);\n            _this.isInput = false;\n        }, false);\n        this.canvas.addEventListener(\"mouseleave\", function (evt) {\n            _this.isInput = false;\n        }, false);\n        window.onresize = function () { return setTimeout(function () { return _this.getSize(); }, 1); };\n    };\n    Renderer.prototype.init = function () {\n        var vertexShader;\n        var fragmentShader;\n        this.addListeners();\n        this.getSize();\n        var buffer = this.gl.createBuffer();\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([-1.0, -1.0,\n            1.0, -1.0, -1.0, 1.0, -1.0, 1.0,\n            1.0, -1.0,\n            1.0, 1.0\n        ]), this.gl.STATIC_DRAW);\n        this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\n        vertexShader = this.gl.createShader(this.gl.VERTEX_SHADER);\n        this.gl.shaderSource(vertexShader, vertexShaderSource);\n        this.gl.compileShader(vertexShader);\n        fragmentShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\n        this.gl.shaderSource(fragmentShader, fragmentShaderSource);\n        this.gl.compileShader(fragmentShader);\n        this.program = this.gl.createProgram();\n        this.gl.attachShader(this.program, vertexShader);\n        this.gl.attachShader(this.program, fragmentShader);\n        this.gl.linkProgram(this.program);\n        this.gl.useProgram(this.program);\n        this.render();\n    };\n    Renderer.prototype.addGLProperties = function () {\n        var positionLocation = this.gl.getAttribLocation(this.program, \"position\");\n        this.gl.enableVertexAttribArray(positionLocation);\n        this.gl.vertexAttribPointer(positionLocation, 2, this.gl.FLOAT, true, 0, 0);\n        var mousePosition = this.gl.getUniformLocation(this.program, \"mouse\");\n        this.gl.uniform2f(mousePosition, this.mousePos.x, this.mousePos.y);\n        var resolutionPosition = this.gl.getUniformLocation(this.program, \"resolution\");\n        this.gl.uniform2f(resolutionPosition, this.canvas.width, this.canvas.height);\n        var rotationPosition = this.gl.getUniformLocation(this.program, \"rotation\");\n        this.gl.uniform2f(rotationPosition, 0.5, 0.8);\n        var timePosition = this.gl.getUniformLocation(this.program, \"time\");\n        this.gl.uniform1f(timePosition, (new Date().getTime() - this.start) / 1000);\n        var strengthPosition = this.gl.getUniformLocation(this.program, \"strength\");\n        this.gl.uniform1f(strengthPosition, this.lastInput / 100.0);\n        var offsetPosition = this.gl.getUniformLocation(this.program, \"offset\");\n        this.gl.uniform2f(offsetPosition, 0, 0);\n        var pitchPosition = this.gl.getUniformLocation(this.program, \"pitch\");\n        this.gl.uniform2f(pitchPosition, 80, 80);\n    };\n    Renderer.prototype.render = function () {\n        var _this = this;\n        this.addGLProperties();\n        this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\n        requestAnimationFrame(function () { return _this.render(); });\n        if (!this.isInput && this.lastInput > 3) {\n            this.lastInput -= 2;\n        }\n        else if (this.isInput && this.lastInput < 150) {\n            this.lastInput += 5;\n        }\n    };\n    return Renderer;\n}());\nexports.Renderer = Renderer;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"\\r\\nattribute vec2 position;\\r\\n  void main() {\\r\\n    gl_Position = vec4(position, 0, 1);\\r\\n  }\"\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nmodule.exports = \"precision highp float;\\r\\n\\r\\nuniform float time;\\r\\nuniform float strength;\\r\\nuniform vec2 mouse;\\r\\nuniform vec2 resolution;\\r\\nuniform vec2 rotation;\\r\\nuniform vec2 pitch; // number of grids\\r\\n\\r\\nvec4 grid(float modX, float modY, float distance) {\\r\\n  float density = 0.5 * (1.0 - abs((2.0-min(modX, modY))/2.0)); // grid alpa 0.5 and then anti alias.\\r\\n  float fade = max(0.0, 0.9-distance/length(resolution)); // 1.2 due to some scaling\\r\\n  return vec4(0.0, 0.0, 0.0, density*fade*min(1.0, max(0.7, strength)));\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n  float gravity = 40.0*strength;// + 1.5*sin(time*8.0);\\r\\n  float reach = 10000.0;\\r\\n\\r\\n  vec2 delta = mouse-gl_FragCoord.xy;\\r\\n  float distance = length(delta);\\r\\n  vec2 newPos = pitch + delta*gravity/((distance*distance + reach)); // gravity\\r\\n\\r\\n  float modX = mod(reach + gl_FragCoord.x, newPos.x);\\r\\n  float modY = mod(reach + gl_FragCoord.y, newPos.y);\\r\\n  \\r\\n  gl_FragColor = grid(modX, modY, distance);\\r\\n}\"\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap dc1222f3609e1a54be5a","// index.\r\ndeclare function require(name:string):any;\r\nimport { Renderer, IRenderable } from \"./renderer\";\r\nimport * as $ from \"jquery\";\r\n\r\nlet renderer:IRenderable = new Renderer();\r\nrenderer.renderOnCanvas(<HTMLElement> document.getElementById(\"grid\"));\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","declare function require(name:string):any;\r\nlet vertexShaderSource:any = require(\"./glsl/2d-vertex-shader.glsl\");\r\nlet fragmentShaderSource:any = require(\"./glsl/2d-fragment-shader.glsl\");\r\n\r\nexport interface IRenderable {\r\n    renderOnCanvas(canvas : HTMLElement): void;\r\n}\r\n\r\nclass Renderer implements IRenderable {\r\n    private gl:WebGLRenderingContext;\r\n    private program:WebGLProgram;\r\n    private canvas:HTMLCanvasElement;\r\n    private mousePos = { x: 0.0, y: 0.0 };\r\n    private oldMousePos = { x: 0.0, y: 0.0 };\r\n    private delta:{x:number, y:number} = undefined;\r\n    private start:number = new Date().getTime();\r\n    private lastInput:number = 3;\r\n    private isInput: boolean = false;\r\n\r\n    renderOnCanvas (div : HTMLElement): void {\r\n        this.canvas = document.createElement(\"canvas\");\r\n        this.canvas.style.width = \"100%\";\r\n        this.canvas.style.height = \"100%\";\r\n        div.appendChild(this.canvas);\r\n        this.gl = this.canvas.getContext(\"experimental-webgl\");\r\n        window.onload = () => this.init();\r\n    }\r\n\r\n    getMousePos(canvas:HTMLCanvasElement, evt:Event): {x:number, y:number} {\r\n        var rect : ClientRect = canvas.getBoundingClientRect();\r\n        var mouseEvt : MouseEvent = <MouseEvent> evt;\r\n        return {\r\n            x: (mouseEvt.clientX - rect.left) / (rect.right - rect.left) * canvas.width,\r\n            y: (mouseEvt.clientY - rect.bottom) / (rect.top - rect.bottom) * canvas.height\r\n        };\r\n    }\r\n\r\n    getTouchPos(canvas:HTMLCanvasElement, evt:Event): {x:number, y:number} {\r\n        var rect : ClientRect = canvas.getBoundingClientRect();\r\n        var touchEvt : TouchEvent = <TouchEvent> evt;\r\n        return {\r\n            x: (touchEvt.touches[0].clientX - rect.left) / (rect.right - rect.left) * canvas.width,\r\n            y: (touchEvt.touches[0].clientY - rect.bottom) / (rect.top - rect.bottom) * canvas.height\r\n        };\r\n    }\r\n\r\n    viewportToPixels(value:string, isHeight:boolean): number {\r\n        var parts: RegExpMatchArray = value.match(/([0-9\\.]+)(vh|vw)/);\r\n        var q: number = Number(parts[1]);\r\n        if(isHeight) {\r\n            return window.innerHeight * (q / 100);\r\n        } else {\r\n            return window.innerWidth * (q / 100);\r\n        }\r\n    }\r\n\r\n    getSize(): void {\r\n        this.canvas.width = this.canvas.clientWidth;\r\n        this.canvas.height = this.canvas.clientHeight;\r\n    }\r\n\r\n    setTimedInterval(callback:()=>void, delay:number, timeout:number): void {\r\n        var id:number = window.setInterval(callback, delay);\r\n        window.setTimeout(()=> {\r\n            window.clearInterval(id);\r\n        }, timeout);\r\n    }\r\n\r\n    addListeners(): void {\r\n        this.canvas.addEventListener(\"mouseenter\", (evt) => {\r\n            this.isInput = true;\r\n            this.delta = undefined;\r\n        }, true);\r\n        this.canvas.addEventListener(\"touchstart\", (evt) => {\r\n            this.isInput = true;\r\n            this.delta = undefined;\r\n            this.mousePos = this.getTouchPos(this.canvas, evt);\r\n        }, true);\r\n\r\n        this.canvas.addEventListener(\"mousemove\", (evt) => {\r\n            this.oldMousePos = this.mousePos;\r\n            this.mousePos = this.getMousePos(this.canvas, evt);\r\n        }, false);\r\n        this.canvas.addEventListener(\"touchmove\", (evt) => {\r\n            this.oldMousePos = this.mousePos;\r\n            this.mousePos = this.getTouchPos(this.canvas, evt);\r\n        }, false);\r\n\r\n        this.canvas.addEventListener(\"touchend\", (evt) =>  {\r\n            this.delta = { x: this.mousePos.x-this.oldMousePos.x, y: this.mousePos.y-this.oldMousePos.y };\r\n            this.setTimedInterval(()=> {\r\n                if (this.delta) {\r\n                    this.mousePos = {\r\n                        x:this.mousePos.x + this.delta.x*(this.lastInput)/250,\r\n                        y: this.mousePos.y + this.delta.y*(this.lastInput)/250\r\n                    };\r\n                }\r\n            }, 18, 1000);\r\n\r\n            this.isInput = false;\r\n        }, false);\r\n\r\n        this.canvas.addEventListener(\"mouseleave\", (evt) =>  {\r\n            this.isInput = false;\r\n        }, false);\r\n        window.onresize = () => setTimeout(() => this.getSize(), 1);\r\n    }\r\n\r\n    init(): void {\r\n        var vertexShader: WebGLShader;\r\n        var fragmentShader: WebGLShader;\r\n\r\n        this.addListeners();\r\n        this.getSize();\r\n\r\n        var buffer: WebGLBuffer = this.gl.createBuffer();\r\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, buffer);\r\n        this.gl.bufferData(\r\n            this.gl.ARRAY_BUFFER,\r\n            new Float32Array([-1.0, -1.0,\r\n                1.0, -1.0, -1.0, 1.0, -1.0, 1.0,\r\n                1.0, -1.0,\r\n                1.0, 1.0\r\n            ]),\r\n            this.gl.STATIC_DRAW\r\n        );\r\n\r\n        this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight);\r\n\r\n        vertexShader = this.gl.createShader(this.gl.VERTEX_SHADER);\r\n        this.gl.shaderSource(vertexShader, vertexShaderSource);\r\n        this.gl.compileShader(vertexShader);\r\n\r\n        fragmentShader = this.gl.createShader(this.gl.FRAGMENT_SHADER);\r\n        this.gl.shaderSource(fragmentShader, fragmentShaderSource);\r\n        this.gl.compileShader(fragmentShader);\r\n\r\n        this.program = this.gl.createProgram();\r\n        this.gl.attachShader(this.program, vertexShader);\r\n        this.gl.attachShader(this.program, fragmentShader);\r\n        this.gl.linkProgram(this.program);\r\n        this.gl.useProgram(this.program);\r\n\r\n        this.render();\r\n    }\r\n\r\n    addGLProperties(): void {\r\n        var positionLocation:number = this.gl.getAttribLocation(this.program, \"position\");\r\n        this.gl.enableVertexAttribArray(positionLocation);\r\n        this.gl.vertexAttribPointer(positionLocation, 2, this.gl.FLOAT, true, 0, 0);\r\n\r\n        var mousePosition:WebGLUniformLocation = this.gl.getUniformLocation(this.program, \"mouse\");\r\n        this.gl.uniform2f(mousePosition, this.mousePos.x, this.mousePos.y);\r\n\r\n        var resolutionPosition:WebGLUniformLocation = this.gl.getUniformLocation(this.program, \"resolution\");\r\n        this.gl.uniform2f(resolutionPosition, this.canvas.width, this.canvas.height);\r\n\r\n        var rotationPosition:WebGLUniformLocation = this.gl.getUniformLocation(this.program, \"rotation\");\r\n        this.gl.uniform2f(rotationPosition, 0.5, 0.8);\r\n\r\n        var timePosition:WebGLUniformLocation = this.gl.getUniformLocation(this.program, \"time\");\r\n        this.gl.uniform1f(timePosition, (new Date().getTime() - this.start) / 1000);\r\n\r\n        var strengthPosition:WebGLUniformLocation = this.gl.getUniformLocation(this.program, \"strength\");\r\n        this.gl.uniform1f(strengthPosition, this.lastInput/100.0);\r\n\r\n        var offsetPosition:WebGLUniformLocation = this.gl.getUniformLocation(this.program, \"offset\");\r\n        this.gl.uniform2f(offsetPosition, 0, 0);\r\n\r\n        var pitchPosition:WebGLUniformLocation = this.gl.getUniformLocation(this.program, \"pitch\");\r\n        this.gl.uniform2f(pitchPosition, 80, 80);\r\n    }\r\n\r\n    render(): void {\r\n        this.addGLProperties();\r\n\r\n        this.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n\r\n        requestAnimationFrame(() => this.render());\r\n        if (!this.isInput && this.lastInput > 3) {\r\n            this.lastInput-=2;\r\n        } else if (this.isInput && this.lastInput < 150) {\r\n            this.lastInput+=5;\r\n        }\r\n    }\r\n}\r\n\r\nexport { Renderer };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/renderer.ts","module.exports = \"\\r\\nattribute vec2 position;\\r\\n  void main() {\\r\\n    gl_Position = vec4(position, 0, 1);\\r\\n  }\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/glsl/2d-vertex-shader.glsl\n// module id = 3\n// module chunks = 0","module.exports = \"precision highp float;\\r\\n\\r\\nuniform float time;\\r\\nuniform float strength;\\r\\nuniform vec2 mouse;\\r\\nuniform vec2 resolution;\\r\\nuniform vec2 rotation;\\r\\nuniform vec2 pitch; // number of grids\\r\\n\\r\\nvec4 grid(float modX, float modY, float distance) {\\r\\n  float density = 0.5 * (1.0 - abs((2.0-min(modX, modY))/2.0)); // grid alpa 0.5 and then anti alias.\\r\\n  float fade = max(0.0, 0.9-distance/length(resolution)); // 1.2 due to some scaling\\r\\n  return vec4(0.0, 0.0, 0.0, density*fade*min(1.0, max(0.7, strength)));\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n  float gravity = 40.0*strength;// + 1.5*sin(time*8.0);\\r\\n  float reach = 10000.0;\\r\\n\\r\\n  vec2 delta = mouse-gl_FragCoord.xy;\\r\\n  float distance = length(delta);\\r\\n  vec2 newPos = pitch + delta*gravity/((distance*distance + reach)); // gravity\\r\\n\\r\\n  float modX = mod(reach + gl_FragCoord.x, newPos.x);\\r\\n  float modY = mod(reach + gl_FragCoord.y, newPos.y);\\r\\n  \\r\\n  gl_FragColor = grid(modX, modY, distance);\\r\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/glsl/2d-fragment-shader.glsl\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}