!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(new(i(2).Renderer)).renderOnCanvas(document.getElementById("grid"))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(3),o=i(4),r=function(){function t(){this.mousePos={x:0,y:0},this.oldMousePos={x:0,y:0},this.delta=void 0,this.start=(new Date).getTime(),this.lastInput=3,this.isInput=!1}return t.prototype.renderOnCanvas=function(t){var e=this;this.canvas=document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",t.appendChild(this.canvas),this.gl=this.canvas.getContext("experimental-webgl"),window.onload=function(){return e.init()}},t.prototype.getMousePos=function(t,e){var i=t.getBoundingClientRect(),n=e;return{x:(n.clientX-i.left)/(i.right-i.left)*t.width,y:(n.clientY-i.bottom)/(i.top-i.bottom)*t.height}},t.prototype.getTouchPos=function(t,e){var i=t.getBoundingClientRect(),n=e;return{x:(n.touches[0].clientX-i.left)/(i.right-i.left)*t.width,y:(n.touches[0].clientY-i.bottom)/(i.top-i.bottom)*t.height}},t.prototype.viewportToPixels=function(t,e){var i=t.match(/([0-9\.]+)(vh|vw)/),n=Number(i[1]);return e?window.innerHeight*(n/100):window.innerWidth*(n/100)},t.prototype.getSize=function(){this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight},t.prototype.setTimedInterval=function(t,e,i){var n=window.setInterval(t,e);window.setTimeout(function(){window.clearInterval(n)},i)},t.prototype.addListeners=function(){var t=this;this.canvas.addEventListener("mouseenter",function(e){t.isInput=!0,t.delta=void 0},!0),this.canvas.addEventListener("touchstart",function(e){t.isInput=!0,t.delta=void 0,t.mousePos=t.getTouchPos(t.canvas,e)},!0),this.canvas.addEventListener("mousemove",function(e){t.oldMousePos=t.mousePos,t.mousePos=t.getMousePos(t.canvas,e)},!1),this.canvas.addEventListener("touchmove",function(e){t.oldMousePos=t.mousePos,t.mousePos=t.getTouchPos(t.canvas,e)},!1),this.canvas.addEventListener("touchend",function(e){t.delta={x:t.mousePos.x-t.oldMousePos.x,y:t.mousePos.y-t.oldMousePos.y},t.setTimedInterval(function(){t.delta&&(t.mousePos={x:t.mousePos.x+t.delta.x*t.lastInput/250,y:t.mousePos.y+t.delta.y*t.lastInput/250})},18,1e3),t.isInput=!1},!1),this.canvas.addEventListener("mouseleave",function(e){t.isInput=!1},!1),window.onresize=function(){return setTimeout(function(){return t.getSize()},1)}},t.prototype.init=function(){var t,e;this.addListeners(),this.getSize();var i=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),this.gl.STATIC_DRAW),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight),t=this.gl.createShader(this.gl.VERTEX_SHADER),this.gl.shaderSource(t,n),this.gl.compileShader(t),e=this.gl.createShader(this.gl.FRAGMENT_SHADER),this.gl.shaderSource(e,o),this.gl.compileShader(e),this.program=this.gl.createProgram(),this.gl.attachShader(this.program,t),this.gl.attachShader(this.program,e),this.gl.linkProgram(this.program),this.gl.useProgram(this.program),this.render()},t.prototype.addGLProperties=function(){var t=this.gl.getAttribLocation(this.program,"position");this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!0,0,0);var e=this.gl.getUniformLocation(this.program,"mouse");this.gl.uniform2f(e,this.mousePos.x,this.mousePos.y);var i=this.gl.getUniformLocation(this.program,"resolution");this.gl.uniform2f(i,this.canvas.width,this.canvas.height);var n=this.gl.getUniformLocation(this.program,"rotation");this.gl.uniform2f(n,.5,.8);var o=this.gl.getUniformLocation(this.program,"time");this.gl.uniform1f(o,((new Date).getTime()-this.start)/1e3);var r=this.gl.getUniformLocation(this.program,"strength");this.gl.uniform1f(r,this.lastInput/100);var s=this.gl.getUniformLocation(this.program,"offset");this.gl.uniform2f(s,0,0);var a=this.gl.getUniformLocation(this.program,"pitch");this.gl.uniform2f(a,80,80)},t.prototype.render=function(){var t=this;this.addGLProperties(),this.gl.drawArrays(this.gl.TRIANGLES,0,6),requestAnimationFrame(function(){return t.render()}),!this.isInput&&this.lastInput>3?this.lastInput-=2:this.isInput&&this.lastInput<150&&(this.lastInput+=5)},t}();e.Renderer=r},function(t,e){t.exports="\r\nattribute vec2 position;\r\n  void main() {\r\n    gl_Position = vec4(position, 0, 1);\r\n  }"},function(t,e){t.exports="precision highp float;\r\n\r\nuniform float time;\r\nuniform float strength;\r\nuniform vec2 mouse;\r\nuniform vec2 resolution;\r\nuniform vec2 rotation;\r\nuniform vec2 pitch; // number of grids\r\n\r\nvec4 grid(float modX, float modY, float distance) {\r\n  float density = 0.5 * (1.0 - abs((2.0-min(modX, modY))/2.0)); // grid alpa 0.5 and then anti alias.\r\n  float fade = max(0.0, 0.9-distance/length(resolution)); // 1.2 due to some scaling\r\n  return vec4(0.0, 0.0, 0.0, density*fade*min(1.0, max(0.7, strength)));\r\n}\r\n\r\nvoid main() {\r\n  float gravity = 40.0*strength;// + 1.5*sin(time*8.0);\r\n  float reach = 10000.0;\r\n\r\n  vec2 delta = mouse-gl_FragCoord.xy;\r\n  float distance = length(delta);\r\n  vec2 newPos = pitch + delta*gravity/((distance*distance + reach)); // gravity\r\n\r\n  float modX = mod(reach + gl_FragCoord.x, newPos.x);\r\n  float modY = mod(reach + gl_FragCoord.y, newPos.y);\r\n  \r\n  gl_FragColor = grid(modX, modY, distance);\r\n}"}]);
//# sourceMappingURL=bundle.js.map